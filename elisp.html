<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-02-17 Wed 04:26 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs Lisp Guide</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Maty Klug" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://gongzhitaao.org/orgcss/org.css"/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Emacs Lisp Guide</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org48cbd81">1. Emacs Lisp Guide</a>
<ul>
<li><a href="#orgde078dd">1.1. Audience</a></li>
<li><a href="#orgc82b884">1.2. Programming in Emacs Lisp</a></li>
<li><a href="#org9251959">1.3. After reading this guide</a></li>
<li><a href="#org4555ccd">1.4. Trivial basics</a></li>
<li><a href="#org304badd">1.5. Evaluation</a></li>
<li><a href="#orgdeb4673">1.6. Discoverability</a>
<ul>
<li><a href="#org616bd48">1.6.1. Finding functions of keybindings</a></li>
<li><a href="#orgaba7e7a">1.6.2. Getting documentation</a></li>
<li><a href="#orgb3e5134">1.6.3. Find all bindings in the current buffer</a></li>
<li><a href="#orga1212a2">1.6.4. Searching for documentation topics</a></li>
<li><a href="#orge56a55e">1.6.5. Jumping to definition</a></li>
<li><a href="#orgaaaac45">1.6.6. Describe functions</a></li>
</ul>
</li>
<li><a href="#org706d0c4">1.7. Basic concepts</a>
<ul>
<li><a href="#orgb1d2785">1.7.1. Buffers</a></li>
<li><a href="#orga819f70">1.7.2. Buffer-local variables</a></li>
<li><a href="#org37a1287">1.7.3. Project-wide buffer-local variables</a></li>
<li><a href="#orgffbf44d">1.7.4. The point</a></li>
<li><a href="#org404548f">1.7.5. The region</a></li>
<li><a href="#org07b0547">1.7.6. Text properties</a></li>
</ul>
</li>
<li><a href="#orgc8fc825">1.8. Debugging</a></li>
<li><a href="#orgce4b26e">1.9. Editing</a>
<ul>
<li><a href="#orgf6cba4e">1.9.1. Paredit</a></li>
</ul>
</li>
<li><a href="#orgdc2b8a4">1.10. Manipulating the buffer</a>
<ul>
<li><a href="#orgd489a3b">1.10.1. Text properties</a></li>
</ul>
</li>
<li><a href="#org5ff8cac">1.11. Navigating the buffer</a>
<ul>
<li><a href="#org229ea80">1.11.1. Save excursion</a></li>
</ul>
</li>
<li><a href="#orgf06ad12">1.12. Querying the buffer</a></li>
<li><a href="#org4b059d2">1.13. Temporary buffers</a></li>
<li><a href="#org373d150">1.14. Defining interactive functions</a></li>
<li><a href="#org9bbba24">1.15. Defining your own major mode</a></li>
<li><a href="#orgc7f9279">1.16. Defining a minor mode</a></li>
<li><a href="#org65d9fe2">1.17. Markers</a></li>
<li><a href="#orgfc8ce5d">1.18. Overlays</a></li>
<li><a href="#org27a1415">1.19. Standard practices</a>
<ul>
<li><a href="#org3b10aaa">1.19.1. Namespacing</a></li>
</ul>
</li>
<li><a href="#orgbe314c0">1.20. Alternative sources</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org48cbd81" class="outline-2">
<h2 id="org48cbd81"><span class="section-number-2">1</span> Emacs Lisp Guide</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgde078dd" class="outline-3">
<h3 id="orgde078dd"><span class="section-number-3">1.1</span> Audience</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Programmers who are too busy to read through long tutorials and
manuals, but who want to extend their editor. You don't need to learn
everything from the ground up, just enough knowledge to be
self-sufficient. You've been using Emacs for a while and now it's time
you started making some handy extensions for yourself.
</p>

<p>
There are a bunch of existing guides, but they don't strike the right
balance of useful and helpful. Some just list functions, others try to
explain Emacs Lisp from the ground up as a language. You don't need to
know everything right away. See the [Alternative sources](#alternative-sources)
section for a list of these.
</p>
</div>
</div>

<div id="outline-container-orgc82b884" class="outline-3">
<h3 id="orgc82b884"><span class="section-number-3">1.2</span> Programming in Emacs Lisp</h3>
<div class="outline-text-3" id="text-1-2">
<p>
I'm not going to explain the Emacs Lisp language itself in any detail.
Programming in <a href="http://en.wikipedia.org/wiki/Emacs_Lisp">Emacs Lisp</a> (look at the Wikipedia page for the academic details)
is similar to programming in Python, Scheme, Common Lisp, JavaScript, Ruby, and
languages like that. Its syntax is funny but otherwise it's an imperative
language with similar data structures.
</p>

<p>
<b><b>One important difference</b></b> compared to usual languages to be aware of is that it
has <span class="underline">dynamic scope</span> by default. See <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Dynamic-Binding.html#Dynamic-Binding">Dynamic Binding</a> in the manual for the details.
Almost all Emacs Lisp code you come across today will be using this. <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html#Lexical-Binding">Lexical
Binding</a> has recently been added to Emacs, it will take a while for this to
permeate.
</p>

<p>
Like all Lisps, Emacs Lisp has macros which you can <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Macros.html#Macros">read about in the manual at
your leisure</a>
</p>
</div>
</div>

<div id="outline-container-org9251959" class="outline-3">
<h3 id="org9251959"><span class="section-number-3">1.3</span> After reading this guide</h3>
<div class="outline-text-3" id="text-1-3">
<p>
The best, most comprehensive resource on Emacs Lisp is <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/index.html">the manual</a>. I will
reference this manual throughout this guide. I will not repeat what's already
there. You can reference this manually in a random access fashion when you need
to solve a problem.
</p>

<p>
I reference the manual throughout the guide by HTML link, but you can
read it inside your Emacs itself. Run: `C-h i m Elisp RET`
</p>
</div>
</div>

<div id="outline-container-org4555ccd" class="outline-3">
<h3 id="org4555ccd"><span class="section-number-3">1.4</span> Trivial basics</h3>
<div class="outline-text-3" id="text-1-4">
<p>
These are the basics to syntax that you can lookup in any guide or
just by looking at some Emacs Lisp code. I am assuming you're a
programmer who can pick things up like this just by looking at code. I
include these because I use them later:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span>* 2 3<span style="color: #61bfff;">)</span>
<span style="color: #61bfff;">(</span>concat <span style="color: #f1fa8c;">"a"</span> <span style="color: #f1fa8c;">"b"</span><span style="color: #61bfff;">)</span>
<span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defun</span> <span style="color: #50fa7b; font-weight: bold;">func</span> <span style="color: #ff79c6;">(</span>arg1 arg2<span style="color: #ff79c6;">)</span>
  <span style="color: #8995ba;">"Always document your functions."</span>
  &lt;function body&gt;<span style="color: #61bfff;">)</span>
<span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defvar</span> <span style="font-weight: bold;">var-name</span> &lt;the value&gt;
  <span style="color: #f1fa8c;">"Always document your variables."</span><span style="color: #61bfff;">)</span>
<span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">let</span> <span style="color: #ff79c6;">(</span><span style="color: #50fa7b;">(</span>x 1<span style="color: #50fa7b;">)</span>
      <span style="color: #50fa7b;">(</span>y 2<span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span>
  ...<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
In Lisp the normal `LET` doesn't let you refer to previous variables,
so you need to use `LET*` for that. This is likely to trip people up,
so I include it here.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">let*</span> <span style="color: #ff79c6;">(</span><span style="color: #50fa7b;">(</span>x 1<span style="color: #50fa7b;">)</span>
       <span style="color: #50fa7b;">(</span>y x<span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span>
  ...<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
To do many things at once in one expression, use `PROGN`:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">progn</span> do-this
       do-that<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
<a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Local-Variables.html#Local-Variables">See manual</a> for details.
</p>

<p>
The way to set variables is not obvious:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">setq</span> var-name value<span style="color: #61bfff;">)</span>

</pre>
</div>

<p>
Equality and comparison operators:
</p>

<ul class="org-ul">
<li>`(eq major-mode 'a)`</li>
<li>`(= 0 1)`</li>
<li>`(&gt; 0 1)`</li>
<li>`(string= "a" "b")`</li>
<li>`(string&gt; "a" "b")`</li>
</ul>

<p>
Emacs Lisp has a bunch of equality operators. See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Equality-Predicates.html">the manual</a> for gory details.
</p>

<p>
Data structures available: lists, vectors, rings, hashtables. Look them up in
<a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/index.html">the manual</a>.
</p>
</div>
</div>

<div id="outline-container-org304badd" class="outline-3">
<h3 id="org304badd"><span class="section-number-3">1.5</span> Evaluation</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Use `M-:` to evaluate any Emacs Lisp expression and print the
result. I personally use this constantly.</li>
<li>Use `C-x C-e` to evaluate the previous s-expression in the
buffer. I personally never use this. See next binding.</li>
<li>Use `C-M-x` to evaluate the current top-level s-expression. I use
this to re-apply `defvar` and `defun` declarations.</li>
<li>There is a REPL available by `M-x ielm`. I tend to use `M-:` rather
than the REPL but you might like it.</li>
<li>Use `M-x eval-buffer` to evaluate the whole buffer of Emacs Lisp
code.</li>
</ul>
</div>
</div>

<div id="outline-container-orgdeb4673" class="outline-3">
<h3 id="orgdeb4673"><span class="section-number-3">1.6</span> Discoverability</h3>
<div class="outline-text-3" id="text-1-6">
<p>
A very important thing as an Emacs Lisp programmer is being able to
get the information you want in a few keystrokes. Here's a list of
ways to find what you need when you're writing Elisp code.
</p>
</div>

<div id="outline-container-org616bd48" class="outline-4">
<h4 id="org616bd48"><span class="section-number-4">1.6.1</span> Finding functions of keybindings</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
Find the function called by a keybinding: `C-h k`
</p>

<p>
This will show something like:
</p>

<p>
C-p runs the command previous-line, which is an interactive compiled
Lisp function in `simple.el'.
</p>

<p>
It is bound to C-p.
</p>

<p>
(previous-line &amp;optional ARG TRY-VSCROLL)
</p>

<p>
You can click the link `simple.el` to go directly to the definition of
that function. Very handy indeed.
</p>
</div>
</div>

<div id="outline-container-orgaba7e7a" class="outline-4">
<h4 id="orgaba7e7a"><span class="section-number-4">1.6.2</span> Getting documentation</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
Functions and variables are distinguished in Emacs Lisp, so there are
two commands to do lookups:
</p>

<ul class="org-ul">
<li>Run `C-h f` to show documentation for a function. This also works
for macros.</li>
<li>Run `C-h v` to show documentation for a variable.</li>
</ul>

<p>
You'll see something like:
</p>

<p>
mapcar is a built-in function in `C source code'.
</p>

<p>
(mapcar FUNCTION SEQUENCE)
</p>

<p>
Apply FUNCTION to each element of SEQUENCE, and make a list of the results.
The result is a list just as long as SEQUENCE.
SEQUENCE may be a list, a vector, a bool-vector, or a string.
</p>
</div>
</div>

<div id="outline-container-orgb3e5134" class="outline-4">
<h4 id="orgb3e5134"><span class="section-number-4">1.6.3</span> Find all bindings in the current buffer</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
Run `C-h b` to show a massive list of keybindings and the command they
run. You'll see something like, e.g. in `markdown-mode`:
</p>

<p>
C-c C-x d       markdown-move-down
C-c C-x l       markdown-promote
C-c C-x m       markdown-insert-list-item
</p>
</div>
</div>

<div id="outline-container-orga1212a2" class="outline-4">
<h4 id="orga1212a2"><span class="section-number-4">1.6.4</span> Searching for documentation topics</h4>
<div class="outline-text-4" id="text-1-6-4">
<p>
Use the commands called `apropos`.
</p>

<ul class="org-ul">
<li>`M-x apropos`</li>
<li>`M-x apropos-command`</li>
<li>`M-x apropos-library`</li>
<li>`M-x apropos-documentation`</li>
</ul>
</div>
</div>

<div id="outline-container-orge56a55e" class="outline-4">
<h4 id="orge56a55e"><span class="section-number-4">1.6.5</span> Jumping to definition</h4>
<div class="outline-text-4" id="text-1-6-5">
<p>
Install this package:
<a href="https://github.com/purcell/elisp-slime-nav">elisp-slime-nav</a>
</p>

<p>
Now you can use `M-.` to jump to the identifer at point and `M-,` to
jump back.
</p>
</div>
</div>

<div id="outline-container-orgaaaac45" class="outline-4">
<h4 id="orgaaaac45"><span class="section-number-4">1.6.6</span> Describe functions</h4>
<div class="outline-text-4" id="text-1-6-6">
<p>
The range of `M-x describe-` functions are useful:
</p>

<ul class="org-ul">
<li>`M-x describe-mode` (aka `C-h m`)</li>
<li>`M-x describe-face`</li>
</ul>

<p>
Other ones have been mentioned above as keybindings.
</p>
</div>
</div>
</div>

<div id="outline-container-org706d0c4" class="outline-3">
<h3 id="org706d0c4"><span class="section-number-3">1.7</span> Basic concepts</h3>
<div class="outline-text-3" id="text-1-7">
</div>
<div id="outline-container-orgb1d2785" class="outline-4">
<h4 id="orgb1d2785"><span class="section-number-4">1.7.1</span> Buffers</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
All Emacs Lisp code when run has a current buffer. Operations that
claim to work on "the buffer" work on this current buffer. Some handy
functions, which you can run `C-h f` on to get more info:
</p>

<ul class="org-ul">
<li>`(current-buffer)` - get the current buffer.</li>
<li>`(with-current-buffer buffer-or-name &#x2026;)` - temporarily use the given buffer.</li>
<li>`(set-buffer buffer-or-name)` - set the current buffer without
switching to it.</li>
<li>`(switch-to-buffer name)` - switch to the buffer visually.</li>
</ul>

<p>
See <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Buffers.html#Buffers">Buffers</a> in the manual for detailed info.
</p>
</div>
</div>

<div id="outline-container-orga819f70" class="outline-4">
<h4 id="orga819f70"><span class="section-number-4">1.7.2</span> Buffer-local variables</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
Buffers have local variables, for example:
</p>

<ul class="org-ul">
<li>major-mode</li>
</ul>

<p>
You can use this variable to see what mode you're in, if you need it.
</p>

<p>
If you want to set your own buffer-local variable, use this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defvar</span> <span style="font-weight: bold;">your-variable-name</span> nil <span style="color: #8995ba;">"Your documentation here."</span><span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
Then later on in your code that will run in a given buffer, use:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span>set <span style="color: #ff79c6;">(</span>make-local-variable 'your-variable-name<span style="color: #ff79c6;">)</span> &lt;the-value&gt;<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
This is very handy in many scenarios when writing functionality. Note
that buffer local variables are reset when you revert the buffer or
change modes.
</p>

<p>
See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Buffer_002dLocal-Variables.html#Buffer_002dLocal-Variables">manual</a> for details.
</p>
</div>
</div>

<div id="outline-container-org37a1287" class="outline-4">
<h4 id="org37a1287"><span class="section-number-4">1.7.3</span> Project-wide buffer-local variables</h4>
<div class="outline-text-4" id="text-1-7-3">
<p>
A handy way to set a buffer local variable for every file that's within a
directory structure is to use <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html">a `.dir-locals.el` file.</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6;">(</span>nil . <span style="color: #50fa7b;">(</span><span style="color: #ffb86c;">(</span>indent-tabs-mode . t<span style="color: #ffb86c;">)</span>
         <span style="color: #ffb86c;">(</span>fill-column . 80<span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span>
 <span style="color: #ff79c6;">(</span>c-mode . <span style="color: #50fa7b;">(</span><span style="color: #ffb86c;">(</span>c-file-style . <span style="color: #f1fa8c;">"BSD"</span><span style="color: #ffb86c;">)</span>
            <span style="color: #ffb86c;">(</span>subdirs . nil<span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span>
 <span style="color: #ff79c6;">(</span><span style="color: #f1fa8c;">"src/imported"</span>
  . <span style="color: #50fa7b;">(</span><span style="color: #ffb86c;">(</span>nil . <span style="color: #bd93f9;">(</span><span style="color: #f1fa8c;">(</span>change-log-default-name
              . <span style="color: #f1fa8c;">"ChangeLog.local"</span><span style="color: #f1fa8c;">)</span><span style="color: #bd93f9;">)</span><span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgffbf44d" class="outline-4">
<h4 id="orgffbf44d"><span class="section-number-4">1.7.4</span> The point</h4>
<div class="outline-text-4" id="text-1-7-4">
<p>
All Emacs Lisp code has a current point in the current buffer. It's a number.
It refers to where the cursor is. See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Point.html">the manual entry for point</a>, but here's
the basics:
</p>

<ul class="org-ul">
<li>`(point)` - current point</li>
<li>`(point-max)` - maximum point of the buffer</li>
<li>`(point-min)` - minimum point of the buffer (why is this not just `0`?
Because of <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Narrowing.html#Narrowing">narrowing</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-org404548f" class="outline-4">
<h4 id="org404548f"><span class="section-number-4">1.7.5</span> The region</h4>
<div class="outline-text-4" id="text-1-7-5">
<p>
Sometimes the region can be active, and you can use it in your Emacs Lisp code
to manipulate text specially. See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/The-Region.html#The-Region">the manual</a> for details. Rundown:
</p>

<ul class="org-ul">
<li>`(region-beginning)` - beginning of the region (a point)</li>
<li>`(region-end)` - end of the region (a point)</li>
<li>`(use-region-p)` - whether to try to use region-beginning/region-end
for manipulation. Handy for use in commands.</li>
<li>`(region-active-p)` - also handy to know whether the region is
active.</li>
</ul>

<p>
Here's an command that uses some region functions:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defun</span> <span style="color: #50fa7b; font-weight: bold;">print-upper-region</span> <span style="color: #ff79c6;">()</span>
  <span style="color: #8995ba;">"Demo to print the uppercased version of the active region."</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">interactive</span><span style="color: #ff79c6;">)</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">when</span> <span style="color: #50fa7b;">(</span>region-active-p<span style="color: #50fa7b;">)</span>
    <span style="color: #50fa7b;">(</span>message <span style="color: #f1fa8c;">"%S"</span> <span style="color: #ffb86c;">(</span><span style="color: #ff79c6; font-weight: bold;">let</span> <span style="color: #bd93f9;">(</span><span style="color: #f1fa8c;">(</span>string <span style="color: #0189cc;">(</span>buffer-substring <span style="color: #0189cc;">(</span>region-beginning<span style="color: #0189cc;">)</span>
                                                  <span style="color: #0189cc;">(</span>region-end<span style="color: #0189cc;">)</span><span style="color: #0189cc;">)</span><span style="color: #f1fa8c;">)</span><span style="color: #bd93f9;">)</span>
                    <span style="color: #bd93f9;">(</span><span style="color: #ff79c6; font-weight: bold;">with-temp-buffer</span>
                      <span style="color: #f1fa8c;">(</span>insert string<span style="color: #f1fa8c;">)</span>
                      <span style="color: #f1fa8c;">(</span>upcase-region <span style="color: #0189cc;">(</span>point-min<span style="color: #0189cc;">)</span>
                                     <span style="color: #0189cc;">(</span>point-max<span style="color: #0189cc;">)</span><span style="color: #f1fa8c;">)</span>
                      <span style="color: #f1fa8c;">(</span>buffer-substring-no-properties <span style="color: #0189cc;">(</span>point-min<span style="color: #0189cc;">)</span>
                                                      <span style="color: #0189cc;">(</span>point-max<span style="color: #0189cc;">)</span><span style="color: #f1fa8c;">)</span><span style="color: #bd93f9;">)</span><span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
To run it, `C-M-x` it, select some text and run `M-x print-upper-region`.
</p>
</div>
</div>

<div id="outline-container-org07b0547" class="outline-4">
<h4 id="org07b0547"><span class="section-number-4">1.7.6</span> Text properties</h4>
<div class="outline-text-4" id="text-1-7-6">
<p>
When you manipulate text in Elisp, it can have properties applied to it, and
those properties can be queried. Full details are <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Text-Properties.html#Text-Properties">here</a> but see the "Manipulating
the buffer" section in this guide for examples.
</p>
</div>
</div>
</div>

<div id="outline-container-orgc8fc825" class="outline-3">
<h3 id="orgc8fc825"><span class="section-number-3">1.8</span> Debugging</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Run `M-: (setq debug-on-error t) RET` and any errors will open up the
debugger.
</p>

<p>
I'll write more about using the debugger stepper and breakpoints later.
</p>
</div>
</div>

<div id="outline-container-orgce4b26e" class="outline-3">
<h3 id="orgce4b26e"><span class="section-number-3">1.9</span> Editing</h3>
<div class="outline-text-3" id="text-1-9">
</div>
<div id="outline-container-orgf6cba4e" class="outline-4">
<h4 id="orgf6cba4e"><span class="section-number-4">1.9.1</span> Paredit</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
Install and enable <a href="http://www.emacswiki.org/emacs/ParEdit">paraedit</a>. Nobody sane writes Lisp without paredit (or its
shiny cousin, <a href="https://github.com/Fuco1/smartparens">smartparens</a>; or its evil twin, <a href="https://github.com/abo-abo/lispy">lispy</a>. You will never have
unbalanced parentheses, brackets, braces, or strings. Learn to accept this and
you will enjoy this mode.
</p>

<p>
As discussed in the discoverability section, use `C-h f paredit-mode
RET` to see the documentation for this mode.
</p>

<p>
Learn the following helpful keybindings:
</p>
</div>

<ol class="org-ol">
<li><a id="org54465dc"></a>Navigating<br />
<div class="outline-text-5" id="text-1-9-1-1">
<ul class="org-ul">
<li>`C-M-u` - Go up a node.</li>
<li>`)` - Go to the end of the node or the end of the parent node when repeated.</li>
<li>`C-M-f` - Go to the end of the node.</li>
<li>`C-M-b` - Go to the start of the node.</li>
</ul>

<p>
<b>**</b> Killing
</p>

<p>
`C-k` - Kill everything from here to the end of the line, including
	any following lines that are included in the scope of the nodes
	being killed. It will also kill inside strings but stop at the end
	of the string.
</p>

<p>
<b>**</b> Raising
</p>

<p>
`M-r` - Replace the parent node by the current node.
</p>

<p>
(|foo) -&gt; foo
(foo |bar mu) -&gt; bar
(foo (bar |mu zot) bob) -&gt; (foo mu bob)
</p>

<p>
<b>**</b> Wrapping
</p>

<ul class="org-ul">
<li>`C-M-(` to wrap the following node in parens.</li>
<li>Alternatively, `C-M-SPC` to select the whole node, or just use your
normal region selection and run `(` or
`[` or `{` to wrap that selection.</li>
</ul>

<p>
<b>**</b> Splitting
</p>

<ul class="org-ul">
<li>`M-s` to split the current node. This works on parenthesized expressions or strings.</li>
<li>`M-J` to join two nodes. Works same as above in reverse.</li>
</ul>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgdc2b8a4" class="outline-3">
<h3 id="orgdc2b8a4"><span class="section-number-3">1.10</span> Manipulating the buffer</h3>
<div class="outline-text-3" id="text-1-10">
<p>
These are the most common:
</p>

<ul class="org-ul">
<li>`(insert "foo" "bar")` - to insert text at point.</li>
<li>`(delete-region start end)` - to delete the region of text.</li>
<li>`(insert-buffer-substring-no-properties buffer start end)` - insert text from another buffer.</li>
<li>`(insert-file-contents &lt;filename&gt;)` - insert from a file.</li>
</ul>

<p>
Any other command that inserts things can be called from Emacs Lisp, too.
</p>
</div>

<div id="outline-container-orgd489a3b" class="outline-4">
<h4 id="orgd489a3b"><span class="section-number-4">1.10.1</span> Text properties</h4>
<div class="outline-text-4" id="text-1-10-1">
<p>
To add properties to text in the buffer, use:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span>put-text-property start end 'my-property-name &lt;value&gt;<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
To completely reset the properties of text to just this, use:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span>set-text-properties start end 'my-property-name &lt;value&gt;<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
To retrieve properties back from the text, use:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span>get-text-property &lt;point&gt; 'my-property-name<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
To propertize a string before it's inserted into a buffer, use:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span>propertize <span style="color: #f1fa8c;">"hello"</span> 'my-property-name &lt;value&gt; 'another-prop &lt;value2&gt;<span style="color: #61bfff;">)</span>

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5ff8cac" class="outline-3">
<h3 id="org5ff8cac"><span class="section-number-3">1.11</span> Navigating the buffer</h3>
<div class="outline-text-3" id="text-1-11">
<p>
Here are the common ones:
</p>

<ul class="org-ul">
<li>`(goto-char &lt;point&gt;)` - go to the point.</li>
<li>`(forward-char n)` - go forward n chars. Accepts a negative argument.</li>
<li>`(end-of-line)` - self-explanatory.</li>
<li>`(beginning-of-line)` - self-explanatory.</li>
<li>`(skip-chars-forward "chars")` - skip given chars.</li>
<li>`(skip-chars-backward "chars")` - skip given chars back.</li>
<li>`(search-forward "foo")` - search for foo, move cursor there.</li>
<li>`(search-backward "foo")` - search backward.</li>
<li>`(search-forward-regexp "blah")` - same, but with regexes.</li>
<li>`(search-backward-regexp "blah")` - same, but with regexes.</li>
</ul>

<p>
If there's a kind of navigation you want to do that you don't know the function name for, think of how you would do it with your keyboard and then use `C-h k` on the commands to find out the functions being run.
</p>
</div>

<div id="outline-container-org229ea80" class="outline-4">
<h4 id="org229ea80"><span class="section-number-4">1.11.1</span> Save excursion</h4>
<div class="outline-text-4" id="text-1-11-1">
<p>
Often you want to jump around the buffer to either query or manipulate something, and then go back to where you were originally. To do this, use:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">save-excursion</span> ...<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
For example:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">save-excursion</span> <span style="color: #ff79c6;">(</span>beginning-of-line<span style="color: #ff79c6;">)</span> <span style="color: #ff79c6;">(</span>looking-at <span style="color: #f1fa8c;">"X"</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
Will return whether the current line starts with `X`.
</p>

<p>
Similarly there is `save-window-excursion`.
</p>
</div>
</div>
</div>

<div id="outline-container-orgf06ad12" class="outline-3">
<h3 id="orgf06ad12"><span class="section-number-3">1.12</span> Querying the buffer</h3>
<div class="outline-text-3" id="text-1-12">
<ul class="org-ul">
<li>`(buffer-substring start end)` - get the string at point, including text properties.</li>
<li>`(buffer-substring-no-properties start end)` - get the string at point, excluding text properties.</li>
<li>`(buffer-string)` - return the string of the whole buffer.</li>
<li>`(looking-at "[a-zA-Z]+")` - does text following point match the regex?</li>
<li>`(looking-back "[a-zA-Z]+")` - does text preceding point match the regex?</li>
</ul>
</div>
</div>

<div id="outline-container-org4b059d2" class="outline-3">
<h3 id="org4b059d2"><span class="section-number-3">1.13</span> Temporary buffers</h3>
<div class="outline-text-3" id="text-1-13">
<p>
It's often useful to do some work in a temporary buffer so that you
can use your normal Elisp code to generate a string and some
properties, for example:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">with-temp-buffer</span>
  <span style="color: #ff79c6;">(</span>insert <span style="color: #f1fa8c;">"Hello!"</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org373d150" class="outline-3">
<h3 id="org373d150"><span class="section-number-3">1.14</span> Defining interactive functions</h3>
<div class="outline-text-3" id="text-1-14">
<p>
To be able to run a function of your own from a keybinding, it needs
to be interactive. You need to add `(interactive)` to your `defun`:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defun</span> <span style="color: #50fa7b; font-weight: bold;">foo</span> <span style="color: #ff79c6;">()</span>
  <span style="color: #8995ba;">"Some function."</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">interactive</span><span style="color: #ff79c6;">)</span>
  <span style="color: #ff79c6;">(</span>do-some-stuff<span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
There's a bunch of variations for `INTERACTIVE`, <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Using-Interactive.html">see the manual</a>.
</p>

<p>
Now your function `foo` is interactive, you can use it in a
keybinding:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span>define-key emacs-lisp-mode <span style="color: #ff79c6;">(</span>kbd <span style="color: #f1fa8c;">"C-c C-f"</span><span style="color: #ff79c6;">)</span> 'foo<span style="color: #61bfff;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9bbba24" class="outline-3">
<h3 id="org9bbba24"><span class="section-number-3">1.15</span> Defining your own major mode</h3>
<div class="outline-text-3" id="text-1-15">
<p>
You can generally use `define-derived-mode`. See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Derived-Modes.html">the manual on this.</a>
</p>

<p>
Example:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">define-derived-mode</span> <span style="color: #50fa7b; font-weight: bold;">hypertext-mode</span>
  text-mode <span style="color: #f1fa8c;">"Hypertext"</span>
  <span style="color: #8995ba;">"Major mode for hypertext.</span>
<span style="color: #8995ba;"> \\{hypertext-mode-map}"</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">setq</span> case-fold-search nil<span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>

<span style="color: #61bfff;">(</span>define-key hypertext-mode-map
  <span style="color: #ff79c6;">[</span>down-mouse-3<span style="color: #ff79c6;">]</span> 'do-hyper-link<span style="color: #61bfff;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc7f9279" class="outline-3">
<h3 id="orgc7f9279"><span class="section-number-3">1.16</span> Defining a minor mode</h3>
<div class="outline-text-3" id="text-1-16">
<p>
Minor modes act as enhancements to existing modes. See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Defining-Minor-Modes.html">the manual</a> about
`define-minor-mode`.
</p>

<p>
A dummy example:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defvar</span> <span style="font-weight: bold;">elisp-guide-mode-map</span> <span style="color: #ff79c6;">(</span>make-sparse-keymap<span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
<span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">define-minor-mode</span> <span style="color: #50fa7b; font-weight: bold;">elisp-guide-mode</span> <span style="color: #8995ba;">"A simple minor mode example."</span>
  <span style="color: #ffb86c;">:lighter</span> <span style="color: #f1fa8c;">" ELGuide"</span>
  <span style="color: #ffb86c;">:keymap</span> elisp-guide-mode-map
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">if</span> <span style="color: #50fa7b;">(</span><span style="color: #ff79c6; font-weight: bold;">bound-and-true-p</span> elisp-guide-mode<span style="color: #50fa7b;">)</span>
      <span style="color: #50fa7b;">(</span>message <span style="color: #f1fa8c;">"Elisp guide activated!"</span><span style="color: #50fa7b;">)</span>
    <span style="color: #50fa7b;">(</span>message <span style="color: #f1fa8c;">"Bye!"</span><span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
<span style="color: #61bfff;">(</span>define-key elisp-guide-mode-map <span style="color: #ff79c6;">(</span>kbd <span style="color: #f1fa8c;">"C-c C-a"</span><span style="color: #ff79c6;">)</span> 'elisp-guide-go<span style="color: #61bfff;">)</span>
<span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defun</span> <span style="color: #50fa7b; font-weight: bold;">elisp-guide-go</span> <span style="color: #ff79c6;">()</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">interactive</span><span style="color: #ff79c6;">)</span>
  <span style="color: #ff79c6;">(</span>message <span style="color: #f1fa8c;">"Go!"</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
Run `M-x elisp-guide-mode` to activate it and run it again to disable it.
</p>

<p>
Real examples of minor modes:
</p>

<ul class="org-ul">
<li><a href="https://github.com/chrisdone/structured-haskell-mode/blob/master/elisp/shm.el#L110">structured-haskell-mode</a></li>
<li><a href="https://github.com/emacsmirror/paredit/blob/master/paredit.el#L203">paredit-mode</a></li>
<li><a href="https://github.com/chrisdone/god-mode/blob/master/god-mode.el#L80..L86">god-mode</a></li>
</ul>
</div>
</div>

<div id="outline-container-org65d9fe2" class="outline-3">
<h3 id="org65d9fe2"><span class="section-number-3">1.17</span> Markers</h3>
<div class="outline-text-3" id="text-1-17">
<p>
Markers are handy objects that store a point, and changes to the buffer make the
marker position move along. See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Markers.html">the manual</a>, which has a good section explaining
it. Their use-case is probably more intermediate than for a tutorial like this,
so I include them only so that you're aware of them.
</p>

<p>
Here's an example:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defun</span> <span style="color: #50fa7b; font-weight: bold;">my-indent-region</span> <span style="color: #ff79c6;">(</span>beg end<span style="color: #ff79c6;">)</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">interactive</span> <span style="color: #f1fa8c;">"r"</span><span style="color: #ff79c6;">)</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">let</span> <span style="color: #50fa7b;">(</span><span style="color: #ffb86c;">(</span>marker <span style="color: #bd93f9;">(</span>make-marker<span style="color: #bd93f9;">)</span><span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span>
    <span style="color: #50fa7b;">(</span>set-marker marker <span style="color: #ffb86c;">(</span>region-end<span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span>
    <span style="color: #50fa7b;">(</span>goto-char <span style="color: #ffb86c;">(</span>region-beginning<span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span>
    <span style="color: #50fa7b;">(</span><span style="color: #ff79c6; font-weight: bold;">while</span> <span style="color: #ffb86c;">(</span>&lt; <span style="color: #bd93f9;">(</span>point<span style="color: #bd93f9;">)</span> marker<span style="color: #ffb86c;">)</span>
      <span style="color: #ffb86c;">(</span>funcall indent-line-function<span style="color: #ffb86c;">)</span>
      <span style="color: #ffb86c;">(</span>forward-line 1<span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
You need to store the end of the region before you start changing the
buffer, because the integer position will increase as you start
indenting lines. So you store it in a marker and that marker's value
updates as the buffer's contents changes.
</p>
</div>
</div>

<div id="outline-container-orgfc8ce5d" class="outline-3">
<h3 id="orgfc8ce5d"><span class="section-number-3">1.18</span> Overlays</h3>
<div class="outline-text-3" id="text-1-18">
<p>
See <a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Overlays.html">the manual on overlays</a>, these are a handy tool for a special kind of text
that behaves as if separate and above the buffer. This is more advanced, by the
time you want to use overlays you'll be happy reading the manual entry about it.
</p>
</div>
</div>

<div id="outline-container-org27a1415" class="outline-3">
<h3 id="org27a1415"><span class="section-number-3">1.19</span> Standard practices</h3>
<div class="outline-text-3" id="text-1-19">
</div>
<div id="outline-container-org3b10aaa" class="outline-4">
<h4 id="org3b10aaa"><span class="section-number-4">1.19.1</span> Namespacing</h4>
<div class="outline-text-4" id="text-1-19-1">
<p>
Emacs Lisp doesn't support modules. We go by convention. If your
module name is `foo`, then name all your top-level bindings by
prefixing it with `foo-`. Example:
</p>

<p>
(defun foo-go ()
	"Go!"
	 &#x2026;)
</p>

<p>
(provide 'foo)
</p>

<p>
To make this easier on your fingers, you can use something like:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defun</span> <span style="color: #50fa7b; font-weight: bold;">emacs-lisp-expand-clever</span> <span style="color: #ff79c6;">()</span>
  <span style="color: #8995ba;">"Cleverly expand symbols with normal dabbrev-expand, but also</span>
<span style="color: #8995ba;">if the symbol is -foo, then expand to module-name-foo."</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">interactive</span><span style="color: #ff79c6;">)</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">if</span> <span style="color: #50fa7b;">(</span><span style="color: #ff79c6; font-weight: bold;">save-excursion</span>
        <span style="color: #ffb86c;">(</span>backward-sexp<span style="color: #ffb86c;">)</span>
        <span style="color: #ffb86c;">(</span><span style="color: #ff79c6; font-weight: bold;">when</span> <span style="color: #bd93f9;">(</span>looking-at <span style="color: #f1fa8c;">"#?'"</span><span style="color: #bd93f9;">)</span> <span style="color: #bd93f9;">(</span>search-forward <span style="color: #f1fa8c;">"'"</span><span style="color: #bd93f9;">)</span><span style="color: #ffb86c;">)</span>
        <span style="color: #ffb86c;">(</span>looking-at <span style="color: #f1fa8c;">"-"</span><span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span>
      <span style="color: #50fa7b;">(</span><span style="color: #ff79c6; font-weight: bold;">if</span> <span style="color: #ffb86c;">(</span>eq last-command this-command<span style="color: #ffb86c;">)</span>
          <span style="color: #ffb86c;">(</span>call-interactively 'dabbrev-expand<span style="color: #ffb86c;">)</span>
        <span style="color: #ffb86c;">(</span><span style="color: #ff79c6; font-weight: bold;">let</span> <span style="color: #bd93f9;">(</span><span style="color: #f1fa8c;">(</span>module-name <span style="color: #0189cc;">(</span>emacs-lisp-module-name<span style="color: #0189cc;">)</span><span style="color: #f1fa8c;">)</span><span style="color: #bd93f9;">)</span>
          <span style="color: #bd93f9;">(</span><span style="color: #ff79c6; font-weight: bold;">progn</span>
            <span style="color: #f1fa8c;">(</span><span style="color: #ff79c6; font-weight: bold;">save-excursion</span>
              <span style="color: #0189cc;">(</span>backward-sexp<span style="color: #0189cc;">)</span>
              <span style="color: #0189cc;">(</span><span style="color: #ff79c6; font-weight: bold;">when</span> <span style="color: #0189cc;">(</span>looking-at <span style="color: #f1fa8c;">"#?'"</span><span style="color: #0189cc;">)</span> <span style="color: #0189cc;">(</span>search-forward <span style="color: #f1fa8c;">"'"</span><span style="color: #0189cc;">)</span><span style="color: #0189cc;">)</span>
              <span style="color: #0189cc;">(</span><span style="color: #ff79c6; font-weight: bold;">unless</span> <span style="color: #0189cc;">(</span>string= <span style="color: #9cb6ad;">(</span>buffer-substring-no-properties
                                <span style="color: #61bfff;">(</span>point<span style="color: #61bfff;">)</span>
                                <span style="color: #61bfff;">(</span>min <span style="color: #ff79c6;">(</span>point-max<span style="color: #ff79c6;">)</span> <span style="color: #ff79c6;">(</span>+ <span style="color: #50fa7b;">(</span>point<span style="color: #50fa7b;">)</span> <span style="color: #50fa7b;">(</span>length module-name<span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span><span style="color: #9cb6ad;">)</span>
                               module-name<span style="color: #0189cc;">)</span>
                <span style="color: #0189cc;">(</span>insert module-name<span style="color: #0189cc;">)</span><span style="color: #0189cc;">)</span><span style="color: #f1fa8c;">)</span>
            <span style="color: #f1fa8c;">(</span>call-interactively 'dabbrev-expand<span style="color: #f1fa8c;">)</span><span style="color: #bd93f9;">)</span><span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span>
    <span style="color: #50fa7b;">(</span>call-interactively 'dabbrev-expand<span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>

<span style="color: #61bfff;">(</span><span style="color: #ff79c6; font-weight: bold;">defun</span> <span style="color: #50fa7b; font-weight: bold;">emacs-lisp-module-name</span> <span style="color: #ff79c6;">()</span>
  <span style="color: #8995ba;">"Search the buffer for `</span><span style="color: #8be9fd;">provide</span><span style="color: #8995ba;">' declaration."</span>
  <span style="color: #ff79c6;">(</span><span style="color: #ff79c6; font-weight: bold;">save-excursion</span>
    <span style="color: #50fa7b;">(</span>goto-char <span style="color: #ffb86c;">(</span>point-min<span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span>
    <span style="color: #50fa7b;">(</span><span style="color: #ff79c6; font-weight: bold;">when</span> <span style="color: #ffb86c;">(</span>search-forward-regexp <span style="color: #f1fa8c;">"^(provide '"</span> nil t 1<span style="color: #ffb86c;">)</span>
      <span style="color: #ffb86c;">(</span>symbol-name <span style="color: #bd93f9;">(</span>symbol-at-point<span style="color: #bd93f9;">)</span><span style="color: #ffb86c;">)</span><span style="color: #50fa7b;">)</span><span style="color: #ff79c6;">)</span><span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
And then:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #61bfff;">(</span>define-key emacs-lisp-mode-map <span style="color: #ff79c6;">(</span>kbd <span style="color: #f1fa8c;">"M-/"</span><span style="color: #ff79c6;">)</span> 'emacs-lisp-expand-clever<span style="color: #61bfff;">)</span>
</pre>
</div>

<p>
Now you can write `(defun -blah M-/` and get `(defun foo-blah`. You
need a `(provide 'foo)` line at the bottom of your file for this to work.
</p>
</div>
</div>
</div>

<div id="outline-container-orgbe314c0" class="outline-3">
<h3 id="orgbe314c0"><span class="section-number-3">1.20</span> Alternative sources</h3>
<div class="outline-text-3" id="text-1-20">
<ul class="org-ul">
<li><a href="https://github.com/gar3thjon3s/elisp-cheatsheet/blob/master/cheatsheet.md">https://github.com/gar3thjon3s/elisp-cheatsheet/blob/master/cheatsheet.md</a></li>
<li><a href="http://wikemacs.org/wiki/Emacs_Lisp_Cheat_Sheet">http://wikemacs.org/wiki/Emacs_Lisp_Cheat_Sheet</a></li>
<li><a href="http://steve-yegge.blogspot.it/2008/01/emergency-elisp.html">http://steve-yegge.blogspot.it/2008/01/emergency-elisp.html</a></li>
<li><a href="http://lispp.wordpress.com/2009/11/25/emacs-lisp-cheatsheet/">http://lispp.wordpress.com/2009/11/25/emacs-lisp-cheatsheet/</a></li>
<li><a href="http://stackoverflow.com/questions/5238245/elisp-programming-whats-the-best-setup">http://stackoverflow.com/questions/5238245/elisp-programming-whats-the-best-setup</a></li>
<li><a href="http://nic.ferrier.me.uk/blog/2012_07/tips-and-tricks-for-emacslisp">http://nic.ferrier.me.uk/blog/2012_07/tips-and-tricks-for-emacslisp</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/eintr/index.html">https://www.gnu.org/software/emacs/manual/html_node/eintr/index.html</a></li>
<li><a href="http://www.emacswiki.org/emacs/EmacsLispIntro">http://www.emacswiki.org/emacs/EmacsLispIntro</a></li>
<li><a href="http://www.emacswiki.org/emacs/LearnEmacsLisp">http://www.emacswiki.org/emacs/LearnEmacsLisp</a></li>
<li><a href="http://bzg.fr/learn-emacs-lisp-in-15-minutes.html">http://bzg.fr/learn-emacs-lisp-in-15-minutes.html</a></li>
<li><a href="http://www.delorie.com/gnu/docs/emacs-lisp-intro/emacs-lisp-intro_toc.html">http://www.delorie.com/gnu/docs/emacs-lisp-intro/emacs-lisp-intro_toc.html</a></li>
<li><a href="http://cjohansen.no/an-introduction-to-elisp">http://cjohansen.no/an-introduction-to-elisp</a></li>
<li><a href="http://emacswiki.org/emacs/ElispCookbook">http://emacswiki.org/emacs/ElispCookbook</a></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Maty Klug</p>
<p class="date">Created: 2021-02-17 Wed 04:26</p>
</div>
</body>
</html>
